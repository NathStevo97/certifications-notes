# 4.11 - UFW Firewall Basics

- UFW = Uncomplicated Firewall
- Considering an application setup where one needs to restrict access to an Ubuntu Server - call it app01
- The server should only accept SSH connections on Port 22 from a particular IP address
  - Additionally, the server runs a web server on http port 80
  - All other users in a particular IP range should be allowed
- Any other unused ports should be closed
- To help with this, can use the netfilter CLI tool and IPTables
  - IPTables - Most common for Linux, but requires a steep learning curve
  - UFW = Alternative that provides a frontend for IPTables
- On the machine: `netstat -an | grep -w LISTEN`
- The UFW tool can be installed via the following:
  - `apt-get update`
  - `apt-get install ufw`
  - `systemctl enable ufw`
  - `systemctl start ufw`
- UFW Rules:
  - Check the UFW Status: ufw status
  - In example, want to allow 80 and 22 from particular sources, but no outgoing
ports need closing:
    - Allow outgoing by default:
      - `ufw allow outgoing`
    - Deny ingress by default (before making exceptions)
      - `ufw default deny incoming`
    - Allow from particular IP address on particular port e.g. SSH 22
      - `ufw allow from 172.16.238.5 to any port 22 proto tcp`
        - Allows inbound connections from the IP address defined to port 22 on any reachable IP address on app01
      - `ufw allow from 172.16.238.5 to any port 80 proto tcp`
        - Allows connections on port 80 from IP address
      - `ufw allow from 172.16.100.0/28 to any port 80 proto tcp`
        - Allows access on port 80 from IPs in any range
      - `ufw deny 8080`
        - Denies all access on port 8080 (not needed if denying access by default)
    - To enable: `ufw enable`
    - `ufw status` to check implementation
  - To delete rule: `ufw delete <rule> or <rule number>`